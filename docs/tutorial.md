# ä½¿ç”¨æ•™ç¨‹

[English](./tutorial_en.md) | ä¸­æ–‡

IPTV-APIæ˜¯ä¸€ä¸ªå¯é«˜åº¦è‡ªå®šä¹‰çš„IPTVæ¥å£æ›´æ–°é¡¹ç›®ğŸ“ºï¼Œè‡ªå®šä¹‰é¢‘é“èœå•ï¼Œè‡ªåŠ¨è·å–ç›´æ’­æºï¼Œæµ‹é€ŸéªŒæ•ˆåç”Ÿæˆå¯ç”¨çš„ç»“æœï¼Œå¯å®ç°ã€âœ¨ç§’æ’­çº§ä½“éªŒğŸš€ã€

ä»¥ä¸‹ä¸€å…±4ç§å®‰è£…è¿è¡Œæ–¹å¼ï¼Œé€‰æ‹©ä¸€ç§é€‚åˆæ‚¨çš„å³å¯

## å·¥ä½œæµéƒ¨ç½²

ä½¿ç”¨Githubå·¥ä½œæµéƒ¨ç½²ï¼Œè‡ªåŠ¨æ›´æ–°æ¥å£

### è¿›å…¥IPTV-APIé¡¹ç›®

æ‰“å¼€ https://github.com/Guovin/iptv-api ç‚¹å‡»`Star`æ”¶è—è¯¥é¡¹ç›®ï¼ˆæ‚¨çš„Staræ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ›ï¼‰
![Star](./images/star.png 'Star')

### Fork

å°†æœ¬ä»“åº“çš„æºä»£ç å¤åˆ¶è‡³ä¸ªäººè´¦å·ä»“åº“ä¸­
![Forkå…¥å£](./images/fork-btn.png 'Forkå…¥å£')

1. ä¸ªäººä»“åº“å‘½åï¼Œå¯æŒ‰æ‚¨å–œæ¬¢çš„åå­—éšæ„å‘½åï¼ˆæœ€ç»ˆç›´æ’­æºç»“æœé“¾æ¥å–å†³äºè¯¥åç§°ï¼‰ï¼Œè¿™é‡Œä»¥é»˜è®¤`iptv-api`ä¸ºä¾‹
2. ç¡®è®¤ä¿¡æ¯æ— è¯¯åï¼Œç‚¹å‡»ç¡®è®¤åˆ›å»º

![Forkè¯¦æƒ…](./images/fork-detail.png 'Forkè¯¦æƒ…')

### æ›´æ–°æºä»£ç 

ç”±äºæœ¬é¡¹ç›®å°†æŒç»­è¿­ä»£ä¼˜åŒ–ï¼Œå¦‚æœæ‚¨æƒ³è·å–æœ€æ–°çš„æ›´æ–°å†…å®¹ï¼Œå¯è¿›è¡Œå¦‚ä¸‹æ“ä½œ

#### 1. Watch

å…³æ³¨è¯¥é¡¹ç›®ï¼Œåç»­æ›´æ–°æ—¥å¿—å°†ä»¥`releases`å‘å¸ƒï¼Œå±Šæ—¶æ‚¨å°†æ”¶åˆ°é‚®ä»¶é€šçŸ¥
![Watch-activity](./images/watch-activity.png 'Watch All Activity')

#### 2. Sync fork

- æ­£å¸¸æ›´æ–°ï¼š

å›åˆ°æ‚¨ Fork åçš„ä»“åº“é¦–é¡µï¼Œå¦‚æœé¡¹ç›®æœ‰æ›´æ–°å†…å®¹ï¼Œç‚¹å‡»`Sync fork`ï¼Œ`Update branch`ç¡®è®¤å³å¯æ›´æ–°æœ€æ–°ä»£ç 
![Sync-fork](./images/sync-fork.png 'Sync fork')

- æ²¡æœ‰`Update branch`æŒ‰é’®ï¼Œæ›´æ–°å†²çªï¼š

è¿™æ˜¯å› ä¸ºæŸäº›æ–‡ä»¶ä¸ä¸»ä»“åº“çš„é»˜è®¤æ–‡ä»¶å†²çªäº†ï¼Œç‚¹å‡»`Discard commits`å³å¯æ›´æ–°æœ€æ–°ä»£ç 
![å†²çªè§£å†³](./images/conflict.png 'å†²çªè§£å†³')

### ä¿®æ”¹æ¨¡æ¿

å½“æ‚¨åœ¨æ­¥éª¤ä¸€ä¸­ç‚¹å‡»ç¡®è®¤åˆ›å»ºï¼ŒæˆåŠŸåä¼šè‡ªåŠ¨è·³è½¬åˆ°æ‚¨çš„ä¸ªäººä»“åº“ã€‚è¿™ä¸ªæ—¶å€™æ‚¨çš„ä¸ªäººä»“åº“å°±åˆ›å»ºå®Œæˆäº†ï¼Œå¯ä»¥å®šåˆ¶ä¸ªäººçš„ç›´æ’­æºé¢‘é“èœå•äº†ï¼

#### 1. ç‚¹å‡» config æ–‡ä»¶å¤¹å†… demo.txt æ¨¡æ¿æ–‡ä»¶ï¼š

![configæ–‡ä»¶å¤¹å…¥å£](./images/config-folder.png 'configæ–‡ä»¶å¤¹å…¥å£')

![demo.txtå…¥å£](./images/demo-btn.png 'demo.txtå…¥å£')

æ‚¨å¯ä»¥å¤åˆ¶å¹¶å‚è€ƒé»˜è®¤æ¨¡æ¿çš„æ ¼å¼è¿›è¡Œåç»­æ“ä½œã€‚

#### 2. config æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸ªäººæ¨¡æ¿ user_demo.txtï¼š

1. ç‚¹å‡»`config`ç›®å½•
2. åˆ›å»ºæ–‡ä»¶
3. æ¨¡æ¿æ–‡ä»¶å‘½åä¸º`user_demo.txt`
4. æ¨¡æ¿æ–‡ä»¶éœ€è¦æŒ‰ç…§ï¼ˆé¢‘é“åˆ†ç±»,#genre#ï¼‰ï¼Œï¼ˆé¢‘é“åç§°,é¢‘é“æ¥å£ï¼‰è¿›è¡Œç¼–å†™ï¼Œæ³¨æ„æ˜¯è‹±æ–‡é€—å·ã€‚å¦‚æœéœ€è¦å°†è¯¥æ¥å£è®¾ä¸ºç™½åå•ï¼ˆä¸æµ‹é€Ÿã€ä¿ç•™åœ¨ç»“æœæœ€å‰ï¼‰ï¼Œå¯åœ¨åœ°å€åæ·»åŠ 
   `$!`å³å¯ï¼Œä¾‹å¦‚http://xxx$!ã€‚åé¢ä¹Ÿå¯ä»¥æ·»åŠ é¢å¤–è¯´æ˜ä¿¡æ¯ï¼Œå¦‚ï¼šhttp://xxx$!ç™½åå•
5. ç‚¹å‡»`Commit changes...`è¿›è¡Œä¿å­˜

![åˆ›å»ºuser_demo.txt](./images/edit-user-demo.png 'åˆ›å»ºuser_demo.txt')

### ä¿®æ”¹é…ç½®

è·Ÿç¼–è¾‘æ¨¡æ¿ä¸€æ ·ï¼Œä¿®æ”¹è¿è¡Œé…ç½®

#### 1. ç‚¹å‡» config æ–‡ä»¶å¤¹å†…çš„ config.ini é…ç½®æ–‡ä»¶ï¼š

![config.iniå…¥å£](./images/config-btn.png 'config.iniå…¥å£')

#### 2. å¤åˆ¶é»˜è®¤é…ç½®æ–‡ä»¶å†…å®¹ï¼š

![copy config.ini](./images/copy-config.png 'å¤åˆ¶é»˜è®¤é…ç½®')

#### 3. config æ–‡ä»¶å¤¹å†…æ–°å»ºä¸ªäººé…ç½®æ–‡ä»¶ user_config.iniï¼š

1. åˆ›å»ºæ–‡ä»¶
2. é…ç½®æ–‡ä»¶å‘½åä¸º`user_config.ini`
3. ç²˜è´´é»˜è®¤é…ç½® ï¼ˆåˆ›å»º`user_config.ini`å¯ä»¥åªè¾“å…¥æƒ³è¦ä¿®æ”¹çš„é…ç½®é¡¹å³å¯ï¼Œæ— éœ€å…¨éƒ¨å¤åˆ¶ config.iniï¼Œæ³¨æ„é…ç½®æ–‡ä»¶ä¸Šæ–¹çš„
   `[Settings]`å¿…é¡»ä¿ç•™ï¼Œå¦åˆ™ä¸‹æ–¹çš„è‡ªå®šä¹‰é…ç½®ä¸ç”Ÿæ•ˆï¼‰
4. ä¿®æ”¹æ¨¡æ¿å’Œç»“æœæ–‡ä»¶é…ç½®ï¼š
    - source_file = config/user_demo.txt
    - final_file = output/user_result.txt
5. ç‚¹å‡»`Commit changes...`è¿›è¡Œä¿å­˜

![åˆ›å»ºuser_config.ini](./images/edit-user-config.png 'åˆ›å»ºuser_config.ini')
![ç¼–è¾‘final_fileé…ç½®](./images/edit-user-final-file.png 'ç¼–è¾‘source_fileé…ç½®')
![ç¼–è¾‘source_fileé…ç½®](./images/edit-user-source-file.png 'ç¼–è¾‘source_fileé…ç½®')

æŒ‰ç…§æ‚¨çš„éœ€è¦é€‚å½“è°ƒæ•´é…ç½®ï¼Œä»¥ä¸‹æ˜¯é»˜è®¤é…ç½®è¯´æ˜ï¼š
[é…ç½®å‚æ•°](./config.md)

> [!NOTE]
> 1. å¯¹äºå¼€å¯æ˜¾ç¤ºæ¥å£ä¿¡æ¯ï¼Œç”±äºéƒ¨åˆ†æ’­æ”¾å™¨ï¼ˆå¦‚`PotPlayer`ï¼‰ä¸æ”¯æŒè§£ææ¥å£è¡¥å……ä¿¡æ¯ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸æ’­æ”¾ï¼Œå¯ä¿®æ”¹é…ç½®:`open_url_info
=False`ï¼ˆGUIï¼šå–æ¶ˆå‹¾é€‰æ˜¾ç¤ºæ¥å£ä¿¡æ¯ï¼‰å…³é—­è¯¥åŠŸèƒ½
> 2. å¦‚æœä½ çš„ç½‘ç»œç¡®å®šæ”¯æŒIPv6ï¼Œå¯ä¿®æ”¹é…ç½®:`ipv6_support =True`(GUIï¼šå‹¾é€‰`å¼ºåˆ¶è®¤ä¸ºå½“å‰ç½‘ç»œæ”¯æŒIPv6`ï¼‰è·³è¿‡æ”¯æŒæ€§æ£€æŸ¥
> 3. å¼€å¯å…³é”®å­—æœç´¢ï¼ˆé»˜è®¤å…³é—­ï¼‰ä¼šå¤§å¹…å¢åŠ æ›´æ–°è€—æ—¶ï¼Œä¸æ¨èå¼€å¯

#### åŒç†ä½ å¯ä»¥è‡ªå®šä¹‰è®¢é˜…æºã€é»‘åå•ã€ç™½åå•ï¼ˆå»ºè®®å¤åˆ¶æ–‡ä»¶é‡å‘½åæ·»åŠ `user_`å‰ç¼€ï¼‰

- è®¢é˜…æºï¼ˆ`config/subscribe.txt`ï¼‰

  æ”¯æŒtxtå’Œm3uåœ°å€ä½œä¸ºè®¢é˜…ï¼Œç¨‹åºå°†ä¾æ¬¡è¯»å–å…¶ä¸­çš„é¢‘é“æ¥å£æ•°æ®
  ![è®¢é˜…æº](./images/subscribe.png 'è®¢é˜…æº')


- æœ¬åœ°æºï¼ˆ`config/local.txt`ï¼‰

  é¢‘é“æ¥å£æ•°æ®æ¥æºäºæœ¬åœ°æ–‡ä»¶ï¼Œç¨‹åºå°†ä¾æ¬¡è¯»å–å…¶ä¸­çš„é¢‘é“æ¥å£æ•°æ®
  ![æœ¬åœ°æº](./images/local.png 'æœ¬åœ°æº')


- é»‘åå•ï¼ˆ`config/blacklist.txt`ï¼‰

  ç¬¦åˆé»‘åå•å…³é”®å­—çš„æ¥å£å°†ä¼šè¢«è¿‡æ»¤ï¼Œä¸ä¼šè¢«æ”¶é›†ï¼Œæ¯”å¦‚å«å¹¿å‘Šç­‰ä½è´¨é‡æ¥å£
  ![é»‘åå•](./images/blacklist.png 'é»‘åå•')


- ç™½åå•ï¼ˆ`config/whitelist.txt`ï¼‰

  ç™½åå•å†…çš„æ¥å£æˆ–è®¢é˜…æºè·å–çš„æ¥å£å°†ä¸ä¼šå‚ä¸æµ‹é€Ÿï¼Œä¼˜å…ˆæ’åºè‡³ç»“æœæœ€å‰ã€‚å¡«å†™é¢‘é“åç§°ä¼šç›´æ¥ä¿ç•™è¯¥è®°å½•è‡³æœ€ç»ˆç»“æœï¼Œå¦‚ï¼šCCTV-1,æ¥å£åœ°å€ï¼Œåªå¡«å†™æ¥å£åœ°å€åˆ™å¯¹æ‰€æœ‰é¢‘é“ç”Ÿæ•ˆï¼Œå¤šæ¡è®°å½•æ¢è¡Œè¾“å…¥ã€‚
  ![ç™½åå•](./images/whitelist.png 'ç™½åå•')


- ç»„æ’­æ•°æ®ï¼ˆ`config/rtp`ï¼‰

  æ­¤å¤–ï¼Œå¯¹äºç»„æ’­æºæ•°æ®ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œç»´æŠ¤ï¼Œæ–‡ä»¶ä½äºconfig/rtpç›®å½•ä¸‹ï¼Œæ–‡ä»¶å‘½åæ ¼å¼ä¸ºï¼š`åœ°åŒº_è¿è¥å•†.txt`
  ![ç»„æ’­æ•°æ®](./images/rtp.png 'ç»„æ’­æ•°æ®')

### è¿è¡Œæ›´æ–°

å¦‚æœæ‚¨çš„æ¨¡æ¿å’Œé…ç½®ä¿®æ”¹æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œè¿™æ—¶å°±å¯ä»¥é…ç½®`Actions`æ¥å®ç°è‡ªåŠ¨æ›´æ–°

#### 1. è¿›å…¥ Actionsï¼š

![Actionså…¥å£](./images/actions-btn.png 'Actionså…¥å£')

#### 2. å¼€å¯ Actions å·¥ä½œæµï¼š

![å¼€å¯Actionså·¥ä½œæµ](./images/actions-enable.png 'å¼€å¯Actionså·¥ä½œæµ')
ç”±äº Fork çš„ä»“åº“ Actions å·¥ä½œæµæ˜¯é»˜è®¤å…³é—­çš„ï¼Œéœ€è¦æ‚¨æ‰‹åŠ¨ç¡®è®¤å¼€å¯ï¼Œç‚¹å‡»çº¢æ¡†ä¸­çš„æŒ‰é’®ç¡®è®¤å¼€å¯

![Actionså·¥ä½œæµå¼€å¯æˆåŠŸ](./images/actions-home.png 'Actionså·¥ä½œæµå¼€å¯æˆåŠŸ')
å¼€å¯æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰æ˜¯æ²¡æœ‰ä»»ä½•å·¥ä½œæµåœ¨è¿è¡Œçš„ï¼Œåˆ«æ€¥ï¼Œä¸‹é¢å¼€å§‹è¿è¡Œæ‚¨ç¬¬ä¸€ä¸ªæ›´æ–°å·¥ä½œæµ

#### 3. è¿è¡Œæ›´æ–°å·¥ä½œæµï¼š

##### ï¼ˆ1ï¼‰å¯ç”¨update scheduleï¼š

1. ç‚¹å‡»`Workflows`åˆ†ç±»ä¸‹çš„`update schedule`
2. ç”±äº Fork çš„ä»“åº“å·¥ä½œæµæ˜¯é»˜è®¤å…³é—­çš„ï¼Œç‚¹å‡»`Enable workflow`æŒ‰é’®ç¡®è®¤å¼€å¯

![å¼€å¯Workflowsæ›´æ–°](./images/workflows-btn.png 'å¼€å¯Workflowsæ›´æ–°')

##### ï¼ˆ2ï¼‰æ ¹æ®åˆ†æ”¯è¿è¡Œ Workflowï¼š

è¿™ä¸ªæ—¶å€™å°±å¯ä»¥è¿è¡Œæ›´æ–°å·¥ä½œæµäº†

1. ç‚¹å‡»`Run workflow`
2. è¿™é‡Œå¯ä»¥åˆ‡æ¢æ‚¨è¦è¿è¡Œçš„ä»“åº“åˆ†æ”¯ï¼Œç”±äº Fork é»˜è®¤æ‹‰å–çš„æ˜¯`master`åˆ†æ”¯ï¼Œå¦‚æœæ‚¨ä¿®æ”¹çš„æ¨¡æ¿å’Œé…ç½®ä¹Ÿåœ¨è¯¥åˆ†æ”¯ï¼Œè¿™é‡Œé€‰æ‹©`master`
   å°±å¥½äº†ï¼Œç‚¹å‡»`Run workflow`ç¡®è®¤è¿è¡Œ

![è¿è¡ŒWorkflow](./images/workflows-run.png 'è¿è¡ŒWorkflow')

##### ï¼ˆ3ï¼‰Workflow è¿è¡Œä¸­ï¼š

ç¨ç­‰ç‰‡åˆ»ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‚¨çš„ç¬¬ä¸€æ¡æ›´æ–°å·¥ä½œæµå·²ç»åœ¨è¿è¡Œäº†ï¼

![Workflowè¿è¡Œä¸­](./images/workflow-running.png 'Workflowè¿è¡Œä¸­')

> [!NOTE]\
> ç”±äºè¿è¡Œæ—¶é—´å–å†³äºæ‚¨çš„æ¨¡æ¿é¢‘é“æ•°é‡ä»¥åŠé¡µæ•°ç­‰é…ç½®ï¼Œä¹Ÿå¾ˆå¤§ç¨‹åº¦å–å†³äºå½“å‰ç½‘ç»œçŠ¶å†µï¼Œè¯·è€å¿ƒç­‰å¾…ï¼Œé»˜è®¤æ¨¡æ¿ä¸é…ç½®ä¸€èˆ¬éœ€è¦15
> åˆ†é’Ÿå·¦å³ã€‚

##### ï¼ˆ4ï¼‰Workflow å–æ¶ˆè¿è¡Œï¼š

å¦‚æœæ‚¨è§‰å¾—è¿™æ¬¡çš„æ›´æ–°ä¸å¤ªåˆé€‚ï¼Œéœ€è¦ä¿®æ”¹æ¨¡æ¿æˆ–é…ç½®å†è¿è¡Œï¼Œå¯ä»¥ç‚¹å‡»`Cancel run`å–æ¶ˆæœ¬æ¬¡è¿è¡Œ
![å–æ¶ˆè¿è¡ŒWorkflow](./images/workflow-cancel.png 'å–æ¶ˆè¿è¡ŒWorkflow')

##### ï¼ˆ5ï¼‰Workflow è¿è¡ŒæˆåŠŸï¼š

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œç¨ç­‰ç‰‡åˆ»åå°±å¯ä»¥çœ‹åˆ°è¯¥æ¡å·¥ä½œæµå·²ç»æ‰§è¡ŒæˆåŠŸï¼ˆç»¿è‰²å‹¾å›¾æ ‡ï¼‰

![Workflowæ‰§è¡ŒæˆåŠŸ](./images/workflow-success.png 'Workflowæ‰§è¡ŒæˆåŠŸ')

æ­¤æ—¶æ‚¨å¯ä»¥è®¿é—®æ–‡ä»¶é“¾æ¥ï¼ŒæŸ¥çœ‹æœ€æ–°ç»“æœæœ‰æ²¡æœ‰åŒæ­¥å³å¯ï¼š
https://raw.githubusercontent.com/æ‚¨çš„githubç”¨æˆ·å/ä»“åº“åç§°ï¼ˆå¯¹åº”ä¸Šè¿°Forkåˆ›å»ºæ—¶çš„iptv-apiï¼‰/master/output/user_result.txt

æˆ–è€…ä»£ç†åœ°å€ï¼š
https://cdn.jsdelivr.net/gh/æ‚¨çš„githubç”¨æˆ·å/ä»“åº“åç§°ï¼ˆå¯¹åº”ä¸Šè¿°Forkåˆ›å»ºæ—¶çš„TVï¼‰@master/output/user_result.txt

![ç”¨æˆ·åä¸ä»“åº“åç§°](./images/rep-info.png 'ç”¨æˆ·åä¸ä»“åº“åç§°')

å¦‚æœè®¿é—®è¯¥é“¾æ¥èƒ½æ­£å¸¸è¿”å›æ›´æ–°åçš„æ¥å£å†…å®¹ï¼Œè¯´æ˜æ‚¨çš„ç›´æ’­æºæ¥å£é“¾æ¥å·²ç»å¤§åŠŸå‘Šæˆäº†ï¼å°†è¯¥é“¾æ¥å¤åˆ¶ç²˜è´´åˆ°`TVBox`
ç­‰æ’­æ”¾å™¨é…ç½®æ ä¸­å³å¯ä½¿ç”¨~

> [!NOTE]\
> é™¤äº†é¦–æ¬¡æ‰§è¡Œå·¥ä½œæµéœ€è¦æ‚¨æ‰‹åŠ¨è§¦å‘ï¼Œåç»­æ‰§è¡Œï¼ˆé»˜è®¤åŒ—äº¬æ—¶é—´`æ¯æ—¥6:00ä¸18:00`ï¼‰å°†è‡ªåŠ¨è§¦å‘ã€‚å¦‚æœæ‚¨ä¿®æ”¹äº†æ¨¡æ¿æˆ–é…ç½®æ–‡ä»¶æƒ³ç«‹åˆ»æ‰§è¡Œæ›´æ–°ï¼Œå¯æ‰‹åŠ¨è§¦å‘ï¼ˆ2ï¼‰ä¸­çš„
`Run workflow`å³å¯ã€‚

#### 4.ä¿®æ”¹å·¥ä½œæµæ›´æ–°é¢‘ç‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨æƒ³ä¿®æ”¹æ›´æ–°é¢‘ç‡ï¼ˆé»˜è®¤åŒ—äº¬æ—¶é—´æ¯æ—¥`6:00ä¸18:00`ï¼‰ï¼Œå¯ä¿®æ”¹`on:schedule:- cron`å­—æ®µï¼š
![.github/workflows/main.yml](./images/schedule-cron.png '.github/workflows/main.yml')

å¦‚æœæ‚¨æƒ³ æ¯ 2 å¤©æ‰§è¡Œæ›´æ–°å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š

```bash
- cron: '0 22 */2 * *'
- cron: '0 10 */2 * *'
```

> [!WARNING]
> 1. å¼ºçƒˆä¸å»ºè®®ä¿®æ”¹æ›´æ–°é¢‘ç‡è¿‡é«˜ï¼Œå› ä¸ºçŸ­æ—¶é—´å†…çš„æ¥å£å†…å®¹å¹¶æ— å·®å¼‚ï¼Œè¿‡é«˜çš„æ›´æ–°é¢‘ç‡ä¸é«˜è€—æ—¶è¿è¡Œçš„å·¥ä½œæµéƒ½æœ‰å¯èƒ½è¢«åˆ¤å®šä¸ºèµ„æºæ»¥ç”¨ï¼Œå¯¼è‡´ä»“åº“ä¸è´¦æˆ·è¢«å°ç¦çš„é£é™©ã€‚
> 2. è¯·ç•™æ„æ‚¨çš„å·¥ä½œæµè¿è¡Œæ—¶é•¿ï¼Œè‹¥å‘ç°æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œéœ€è¦é€‚å½“åˆ å‡æ¨¡æ¿ä¸­é¢‘é“æ•°é‡ã€ä¿®æ”¹é…ç½®ä¸­çš„åˆ†é¡µæ•°é‡å’Œæ¥å£æ•°é‡ï¼Œä»¥è¾¾åˆ°åˆè§„çš„è¿è¡Œè¦æ±‚ã€‚

## å‘½ä»¤è¡Œ

1. å®‰è£… Python
   è¯·è‡³å®˜æ–¹ä¸‹è½½å¹¶å®‰è£… Pythonï¼Œå®‰è£…æ—¶è¯·é€‰æ‹©å°† Python æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ Path ä¸­

2. è¿è¡Œæ›´æ–°
   é¡¹ç›®ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ CMD ä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

å®‰è£…ä¾èµ–ï¼š

```shell
pip install pipenv
```

```shell
pipenv install --dev
```

å¯åŠ¨æ›´æ–°ï¼š

```shell
pipenv run dev
```

å¯åŠ¨æœåŠ¡ï¼š

```shell
pipenv run service
```

## GUI è½¯ä»¶

1. ä¸‹è½½[IPTV-API æ›´æ–°è½¯ä»¶](https://github.com/Guovin/iptv-api/releases)ï¼Œæ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»æ›´æ–°ï¼Œå³å¯å®Œæˆæ›´æ–°

2. æˆ–è€…åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯æ‰“å¼€ GUI è½¯ä»¶ï¼š

```shell
pipenv run ui
```

![IPTV-API æ›´æ–°è½¯ä»¶](./images/ui.png 'IPTV-API æ›´æ–°è½¯ä»¶')

å¦‚æœä½ çœ‹ä¸æ‡‚è½¯ä»¶çš„é…ç½®é¡¹ï¼Œä¸è¦åŠ¨ï¼Œç›´æ¥ç‚¹å¯åŠ¨å³å¯

## Docker

### 1. æ‹‰å–é•œåƒ

```bash
docker pull guovern/iptv-api:latest
```

ğŸš€ ä»£ç†åŠ é€Ÿï¼ˆæ¨èå›½å†…ç”¨æˆ·ä½¿ç”¨ï¼‰ï¼š

```bash
docker pull docker.1ms.run/guovern/iptv-api:latest
```

### 2. è¿è¡Œå®¹å™¨

```bash
docker run -d -p 8000:8000 guovern/iptv-api
```

#### æŒ‚è½½ï¼ˆæ¨èï¼‰ï¼š

å®ç°å®¿ä¸»æœºæ–‡ä»¶ä¸å®¹å™¨æ–‡ä»¶åŒæ­¥ï¼Œä¿®æ”¹æ¨¡æ¿ã€é…ç½®ã€è·å–æ›´æ–°ç»“æœæ–‡ä»¶å¯ç›´æ¥åœ¨å®¿ä¸»æœºæ–‡ä»¶å¤¹ä¸‹æ“ä½œ

ä»¥å®¿ä¸»æœºè·¯å¾„/etc/docker ä¸ºä¾‹ï¼š

```bash
-v /etc/docker/config:/iptv-api/config
-v /etc/docker/output:/iptv-api/output
```

> [!WARNING]\
> å¦‚æœé‡æ–°æ‹‰å–é•œåƒè¿›è¡Œæ›´æ–°ç‰ˆæœ¬åï¼Œæ¶‰åŠåˆ°é…ç½®æ–‡ä»¶å˜æ›´æˆ–å¢åŠ æ–°é…ç½®æ—¶ï¼ŒåŠ¡å¿…è¦†ç›–ä¸»æœºçš„æ—§é…ç½®æ–‡ä»¶ï¼ˆconfigç›®å½•ï¼‰ï¼Œå› ä¸ºä¸»æœºçš„é…ç½®æ–‡ä»¶æ˜¯æ— æ³•è‡ªåŠ¨æ›´æ–°çš„ï¼Œå¦åˆ™å®¹å™¨è¿˜æ˜¯ä»¥æ—§é…ç½®è¿è¡Œã€‚

#### ç¯å¢ƒå˜é‡ï¼š

| å˜é‡          | æè¿°       | é»˜è®¤å€¼                |
|:------------|:---------|:-------------------|
| APP_HOST    | æœåŠ¡hoståœ°å€ | "http://localhost" |
| APP_PORT    | æœåŠ¡ç«¯å£     | 8000               |
| UPDATE_CRON | å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´ | "0 22,10 * * *"    |

### 3. æ›´æ–°ç»“æœ

| æ¥å£        | æè¿°         |
|:----------|:-----------|
| /         | é»˜è®¤æ¥å£       |
| /m3u      | m3u æ ¼å¼æ¥å£   |
| /txt      | txt æ ¼å¼æ¥å£   |
| /ipv4     | ipv4 é»˜è®¤æ¥å£  |
| /ipv6     | ipv6 é»˜è®¤æ¥å£  |
| /ipv4/txt | ipv4 txtæ¥å£ |
| /ipv6/txt | ipv6 txtæ¥å£ |
| /ipv4/m3u | ipv4 m3uæ¥å£ |
| /ipv6/m3u | ipv6 m3uæ¥å£ |
| /content  | æ¥å£æ–‡æœ¬å†…å®¹     |
| /log      | æµ‹é€Ÿæ—¥å¿—       |

- RTMP æ¨æµï¼š

> [!NOTE]
> 1. å¦‚æœéœ€è¦å¯¹æœ¬åœ°è§†é¢‘æºè¿›è¡Œæ¨æµï¼Œå¯åœ¨`config`ç›®å½•ä¸‹æ–°å»º`live`æˆ–`hls`ï¼ˆæ¨èï¼‰æ–‡ä»¶å¤¹
> 2. liveæ–‡ä»¶å¤¹ç”¨äºæ¨æµliveæ¥å£ï¼Œhlsæ–‡ä»¶å¤¹ç”¨äºæ¨æµhlsæ¥å£
> 3. å°†ä»¥`é¢‘é“åç§°å‘½å`çš„è§†é¢‘æ–‡ä»¶æ”¾å…¥å…¶ä¸­ï¼Œç¨‹åºä¼šè‡ªåŠ¨æ¨æµåˆ°å¯¹åº”çš„é¢‘é“ä¸­
> 4. å¯è®¿é—® http://localhost:8080/stat æŸ¥çœ‹å®æ—¶æ¨æµçŠ¶æ€ç»Ÿè®¡æ•°æ®

| æ¨æµæ¥å£           | æè¿°                |
|:---------------|:------------------|
| /live          | æ¨æµliveæ¥å£          |
| /hls           | æ¨æµhlsæ¥å£           |
| /live/txt      | æ¨æµlive txtæ¥å£      |
| /hls/txt       | æ¨æµhls txtæ¥å£       |
| /live/m3u      | æ¨æµlive m3uæ¥å£      |
| /hls/m3u       | æ¨æµhls m3uæ¥å£       |
| /live/ipv4/txt | æ¨æµlive ipv4 txtæ¥å£ |
| /hls/ipv4/txt  | æ¨æµhls ipv4 txtæ¥å£  |
| /live/ipv4/m3u | æ¨æµlive ipv4 m3uæ¥å£ |
| /hls/ipv4/m3u  | æ¨æµhls ipv4 m3uæ¥å£  |
| /live/ipv6/txt | æ¨æµlive ipv6 txtæ¥å£ |
| /hls/ipv6/txt  | æ¨æµhls ipv6 txtæ¥å£  |
| /live/ipv6/m3u | æ¨æµlive ipv6 m3uæ¥å£ |
| /hls/ipv6/m3u  | æ¨æµhls ipv6 m3uæ¥å£  |
